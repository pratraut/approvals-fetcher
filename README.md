# Approvals Fetcher

This tool will help in estimating total amount in USD approved to a particular address by fetching approval events from the blockchain.

## Command Line Interface

```shell
>>> ./target/debug/approvals-fetcher -h
Usage: approvals-fetcher [OPTIONS] --rpc <RPC> --from-block <FROM_BLOCK> --spender <SPENDER>

Options:
  -r, --rpc <RPC>                RPC URL
  -f, --from-block <FROM_BLOCK>  From block number
  -t, --to-block <TO_BLOCK>      To block number
  -s, --spender <SPENDER>        Spender Address
  -h, --help                     Print help
  -V, --version                  Print version
```

### Example

```shell
>>> ./target/debug/approvals-fetcher --rpc https://rpc.ankr.com/eth --from-block 20347000 --to-block 20347243 --spender 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE
Latest Block: 20349357
╭────────────────────────────────────────────┬────────────────────────────────────────────┬────────────────────────────────────────────┬──────────────────────┬──────────────────────╮
│ Token                                      ┆ Owner                                      ┆ Spender                                    ┆ Amount Spendable     ┆ Spendable Value(USD) │
╞════════════════════════════════════════════╪════════════════════════════════════════════╪════════════════════════════════════════════╪══════════════════════╪══════════════════════╡
│ 0xdAC17F958D2ee523a2206206994597C13D831ec7 ┆ 0x70d15e30700e431Ade800fFd26742DFF0BfA3803 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 9000000              ┆ $9                   │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 ┆ 0x52f7B68eDC4ABE1443fb8a1848935eBfe269169B ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 50000000             ┆ $50                  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 ┆ 0xEa5127B5AA8480271e0667bEe6BcDAB68eB9b018 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 44049055             ┆ $44                  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xdAC17F958D2ee523a2206206994597C13D831ec7 ┆ 0x82fC23769c8c735eA7d331CD4211DC50E09925B5 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 5000000              ┆ $5                   │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xFe0c30065B384F05761f15d0CC899D4F9F9Cc0eB ┆ 0x8E9F6aA18e075ada3Be86239e730Ba178B9eb9E7 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 18000000000000000000 ┆ $44                  │
╰────────────────────────────────────────────┴────────────────────────────────────────────┴────────────────────────────────────────────┴──────────────────────┴──────────────────────╯

TOTAL VALUE APPROVED TO 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE FROM BLOCK 20347000 TO 20347243 IN USD: $152

Not able to find values in USD:
╭────────────────────────────────────────────┬────────────────────────────────────────────┬────────────────────────────────────────────┬─────────────────────────┬────────────────────────╮
│ Token                                      ┆ Owner                                      ┆ Spender                                    ┆ Amount Approved         ┆ Owner's Actual Balance │
╞════════════════════════════════════════════╪════════════════════════════════════════════╪════════════════════════════════════════════╪═════════════════════════╪════════════════════════╡
│ 0xdAC17F958D2ee523a2206206994597C13D831ec7 ┆ 0xEa5127B5AA8480271e0667bEe6BcDAB68eB9b018 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 44253073                ┆ 1                      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 ┆ 0x8dE696318179E9B1414481cD3D2bd0Fca6eFcd46 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ INF                     ┆ 3148                   │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xe591293151fFDadD5E06487087D9b0E2743de92E ┆ 0x99066a9f61248AE2E665e17Ae6a1b8d725961d63 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 37664984330751414       ┆ 664984330751414        │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0x35fA164735182de50811E8e2E824cFb9B6118ac2 ┆ 0xB35e166eEAf6Df498E82C2aeee22825ed01D33bF ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 46216190493255246       ┆ 1                      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xe6828D65bf5023AE1851D90D8783Cc821ba7eeE1 ┆ 0xDB5b4853ceaBf6D8e08D73FddFa80F507Ef9Fba4 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 11904883577983182074187 ┆ 1                      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xdAC17F958D2ee523a2206206994597C13D831ec7 ┆ 0xa695f419cC1Ad906604d522fCe466F5dd13a11EB ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 103314844               ┆ 1                      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0x35fA164735182de50811E8e2E824cFb9B6118ac2 ┆ 0x21f9a517305764fd384Af2615F7aDD21Dc340939 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 808749153837454624      ┆ 1                      │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 ┆ 0x6F625ca653FCb4cfA2424CBE958aeF8C6690c717 ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 1233580000              ┆ 5611                   │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 ┆ 0xfc7B55eA1eDCcAb9eb6981DC207f5be2398B01da ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ INF                     ┆ 559298                 │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┤
│ 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 ┆ 0xF0025d9Dd4b41c9a6ef9777F5Dbef990C505dEdB ┆ 0x1231DEB6f5749EF6cE6943a275A1D3E7486F4EaE ┆ 297500000000000         ┆ 1000000000000          │
╰────────────────────────────────────────────┴────────────────────────────────────────────┴────────────────────────────────────────────┴─────────────────────────┴────────────────────────╯

Time took: 17.147931083s seconds
```